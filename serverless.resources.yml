service: clothes-detection-resources
frameworkVersion: '3'

provider:
  name: aws
  runtime: nodejs18.x
  profile: clothes-detection-app
  region: us-west-2
  iamRoleStatements:
  - Effect: Allow
    Action:
      - lambda:*
      - secretsmanager:*
    Resource: "*"

functions:
  apikeyRotation: ${file(./serverless/resources/auth-secret.yml):ApikeyRotation}

resources:
  Resources:
    ApikeySecret: ${file(./serverless/resources/auth-secret.yml):ApikeySecret}
    DocsBucket: ${file(./serverless/resources/docs-bucket.yml):DocsBucket}
    ShirtsTable: ${file(./serverless/resources/shirts-table.yml):ShirtsTable}
    ShirtsBucket: ${file(./serverless/resources/shirts-bucket.yml):ShirtsBucket}
    TrousersTable: ${file(./serverless/resources/trousers-table.yml):TrousersTable}
    TrousersBucket: ${file(./serverless/resources/trousers-bucket.yml):TrousersBucket}
    ShoesTable: ${file(./serverless/resources/shoes-table.yml):ShoesTable}
    ShoesBucket: ${file(./serverless/resources/shoes-bucket.yml):ShoesBucket}
    ScanTable: ${file(./serverless/resources/scan-table.yml):ScanTable}
    ScanBucket: ${file(./serverless/resources/scan-bucket.yml):ScanBucket}