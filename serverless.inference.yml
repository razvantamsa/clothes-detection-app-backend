service: clothes-detection-inference
frameworkVersion: '3'

provider:
  name: aws
  runtime: nodejs18.x
  profile: clothes-detection-app
  region: us-west-2
  logRetentionInDays: 14
  ecr:
    images:
      inference-base-image: ${file(./serverless/ecr/base.yml):definition}
      inference-shoe-brand-image: ${file(./serverless/ecr/shoe.brand.yml):definition}
      inference-shoe-adidas-image: ${file(./serverless/ecr/shoe.adidas.yml):definition}
      inference-shoe-nike-image: ${file(./serverless/ecr/shoe.nike.yml):definition}
      inference-shoe-puma-image: ${file(./serverless/ecr/shoe.puma.yml):definition}
      inference-shoe-reebok-image: ${file(./serverless/ecr/shoe.reebok.yml):definition}

  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:*
        - s3:*
        - lambda:*
        - secretsmanager:*
      Resource: "*"

functions:
  baseInferenceLambda-not-usable:
    image:
      name: inference-base-image
  inferenceShoesBrand:
    timeout: 900
    image:
      name: inference-shoe-brand-image
  inferenceShoesAdidas:
    timeout: 900
    image:
      name: inference-shoe-adidas-image
  inferenceShoesNike:
    timeout: 900
    image:
      name: inference-shoe-nike-image
  inferenceShoesPuma:
    timeout: 900
    image:
      name: inference-shoe-puma-image
  inferenceShoesReebok:
    timeout: 900
    image:
      name: inference-shoe-reebok-image

  # detectTrousersBrand
  # detectLevisTrousers
  # detectCalvinKleinTrousers
  # detectUniqloTrousers
  # detectDockersTrousers

  # detectShirtsBrand
  # detectRalphLaurenShirts
  # detectTommyHilfigerShirts
  # detectGapShirts
  # detectUSPAShirts